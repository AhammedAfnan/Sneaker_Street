"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{57364:function(e,i,t){var n=t(35944),l=t(21089),o=t(61628),a=t(67294),r=t(70230),d=t(33083),u=t(84432),s=t(61553),v=t(22015),c=t(47210);i.Z=e=>{let{src:i,width:t=v.TH,height:m=v.lG,htmlHeight:f,htmlWidth:p,isPriority:k=!1,preloadImage:Z=!1,extraImageParams:g={},is360:S=!1,...b}=e,h=(0,r.Z)(),E=(0,o.Z)(l.Z.web_pweb_max_image_dpr),F=null==i?void 0:i.includes("Placeholder"),I=v.yk.some(e=>null==i?void 0:i.includes(e)),L=F||!I||!i,{fallbackSrc:w,fallbackSrcSet:D}=(0,a.useMemo)(()=>{let{imageSrc:e,imageSrcSet:i}=(0,c.Z)({src:v.oI,dpr:2,width:t,height:m,maxDPR:Number(E||5),preferredImageFormat:h});return{fallbackSrc:e,fallbackSrcSet:i}},[m,E,h,t]),N=(0,a.useMemo)(()=>{if(L)return{};let{imageSrc:e,imageSrcSet:n}=(0,c.Z)({src:i,extraImageParams:g,width:t,height:m,maxDPR:Number(E||5),preferredImageFormat:h});return{srcSet:n,src:e}},[L,i,g,t,m,E,h]);return L?(0,n.tZ)(u.Ee,{referrerPolicy:"origin",backgroundImage:`url('${w}')`,htmlWidth:p,htmlHeight:f,srcSet:D,src:w,...b}):(0,n.BX)(a.Fragment,{children:[Z&&(null==N?void 0:N.srcSet)&&(null==N?void 0:N.src)&&(0,n.tZ)(d.Z,{srcSet:N.srcSet,src:N.src}),(0,n.tZ)(u.Ee,{referrerPolicy:"origin",htmlWidth:p,htmlHeight:f,ignoreFallback:(null==N?void 0:N.src)||s.sk||S,fallbackSrc:w,fetchpriority:k?"high":void 0,...N,...b})]})}},22015:function(e,i,t){t.d(i,{TH:function(){return o},lG:function(){return a},oI:function(){return n},yk:function(){return l}});let n="https://stockx-assets.imgix.net/media/Product-Placeholder-Default-20210415.jpg?fit=fill&bg=FFFFFF&auto=format,compress&q=90&dpr=2&trim=color",l=[".net/",".io/",".com/"],o=576,a=o/3*2},47210:function(e,i,t){var n=t(84432);i.Z=e=>{let{src:i,preferredImageFormat:t,width:l,height:o,maxDPR:a=5,extraImageParams:r={}}=e,{client:d,path:u}=(0,n.jH)(i),s=u.split("?"),v=new URLSearchParams(s[1]??""),{q:c,...m}=Object.fromEntries(v.entries()),f=null==d?void 0:d.buildURL(s[0],{...m,...r,w:l,h:o,fm:t,q:60,auto:"compress"}),p={...m,...r,w:l,h:o,auto:"compress",fm:t},k=null==d?void 0:d.buildSrcSet(s[0],p,{variableQualities:{1:57,2:60,3:41,4:35,5:30},devicePixelRatios:[1,2,3,4,5].slice(0,a)});return{imageSrc:f,imageSrcSet:k}}},71285:function(e,i,t){var n=t(48228),l=t(67294),o=t(48712),a=t(42980);i.Z=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,l.useRef)(null==i?void 0:i.context),{context:r,...d}=i,u=(0,l.useCallback)(i=>{var n;return(0,a.Z)({queryKey:[{},{variables:i}]},e,{context:null===(n=t.current)||void 0===n?void 0:n.context})},[e]),{status:s,mutateAsync:v,...c}=(0,n.D)(u,{...d});return{loading:"loading"===s,status:s,mutatefn:function(e){var i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(null==n?void 0:null===(i=n.context)||void 0===i?void 0:i.headers)&&(0,o.Z)({toCheck:n.context.headers})&&(t.current=n),v(e)},...c}}},5565:function(e,i,t){var n=t(60219);let l=(0,n.Z)(()=>Promise.all([t.e(5299),t.e(8514),t.e(9040),t.e(2396),t.e(2256),t.e(6478)]).then(t.bind(t,88981)));i.Z=l},83577:function(e,i,t){var n=t(60219);let l=(0,n.Z)(()=>t.e(6830).then(t.bind(t,79598)));i.Z=l},93626:function(e,i,t){var n=t(60219);let l=(0,n.Z)(()=>Promise.all([t.e(5299),t.e(8514),t.e(9040),t.e(2396),t.e(2256),t.e(3642)]).then(t.bind(t,67627)));i.Z=l},29441:function(e,i,t){var n=t(71285),l=t(4480),o=t(23959),a=t(26354);i.Z=e=>{let i=(0,l.Zl)(o.Z),{mutatefn:t,data:r,error:d,loading:u}=(0,n.Z)(a.Z,{onSuccess(t){var n,l;if(null==e?void 0:e.id){let o=null==t?void 0:null===(l=t.updateListItems)||void 0===l?void 0:null===(n=l.items)||void 0===n?void 0:n.reduce((e,i)=>{var t;return(null==i?void 0:null===(t=i.item)||void 0===t?void 0:t.id)&&(e[i.item.id]=!!i.item.favorite),e},{});i({[null==e?void 0:e.id]:!0,...o})}}});return{data:r,error:d,loading:u,favoriteProduct:t}}},41875:function(e,i,t){var n=t(67294),l=t(23353),o=t(4480),a=t(78786),r=t(51657),d=t(70625),u=t(7335),s=t(37758),v=t(7438),c=t(49941),m=t(20838),f=t(9632),p=t(4872),k=t(63820),Z=t(29441),g=t(75150),S=t(23959);i.Z=e=>{let{product:i,onOpen:t,favoritedProduct:b,onClose:h}=e,{t:E}=(0,l.$G)(),F=(0,r.Z)(),I=(0,d.Z)(),L=(0,v.Z)(),{isOpen:w,onOpen:D,onClose:N}=(0,u.q)(),P=(0,s.pmc)(),O=(0,o.Zl)(S.Z),[U,y]=(0,n.useState)(!1),{milestone:_}=(0,k.Z)(),C=2===_?m.Z.PRODUCT_FAVORITED:m.Z.PRODUCT_FOLLOWED,{updateFavoriteProduct:x,loading:R,data:T,error:V}=(0,g.Z)(),{favoriteProduct:j,loading:A,data:q,error:H}=(0,Z.Z)(i);(0,n.useEffect)(()=>{var e;q&&(null==q?void 0:null===(e=q.updateListItems)||void 0===e?void 0:e.status)!==a.vn.FAILURE&&!A&&(null==h||h(),P({message:E("favorite_confirmation_message"),duration:6e3,isCloseable:!0,position:"bottom",action:{text:E("favorite_confirmation_link"),handleClick:()=>I.push(F("/favorites/all-favorites"))}}))},[q,A]),(0,n.useEffect)(()=>{var e,t,n;if(T&&(null==T?void 0:null===(e=T.updateListItems)||void 0===e?void 0:e.status)!==a.vn.FAILURE&&!R&&(null==i?void 0:i.id)){let e=null==T?void 0:null===(n=T.updateListItems)||void 0===n?void 0:null===(t=n.items)||void 0===t?void 0:t.reduce((e,i)=>{var t;return(null==i?void 0:null===(t=i.item)||void 0===t?void 0:t.id)&&(e[i.item.id]=!!i.item.favorite),e},{});O({[null==i?void 0:i.id]:!1,...e}),null==h||h(),P({message:E("unfavorite_confirmation_message",{productTitle:null==i?void 0:i.title}),duration:6e3,isCloseable:!0,position:"bottom",action:{text:E("unfavorite_confirmation_link"),handleClick:()=>G()}})}},[T,R]),(0,n.useEffect)(()=>{var e,i;(H||V||(null==q?void 0:null===(e=q.updateListItems)||void 0===e?void 0:e.status)===a.vn.FAILURE||(null==T?void 0:null===(i=T.updateListItems)||void 0===i?void 0:i.status)===a.vn.FAILURE)&&(null==h||h(),D())},[V,H,q,T]),(0,n.useEffect)(()=>{U&&(H||V?z():(N(),t()),y(!1))},[U]);let G=async()=>{var e,t;await M(),$({gaEvent:c.EVENTS.FollowProduct,segmentEvent:C,singleSizeVariant:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id})},M=async()=>{var e,t;await j({input:{action:"ADD",items:[{productId:null==i?void 0:i.id,variantId:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id}]}})},W=async()=>{var e,t;await x({input:{action:"DELETE",items:[{productId:null==i?void 0:i.id,variantId:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id}]}})},$=e=>{let{gaEvent:t,segmentEvent:n,singleSizeVariant:l}=e;L(t,null==i?void 0:i.productCategory,null==i?void 0:i.title),(0,f.Z)(n,{vertical:null==i?void 0:i.productCategory,screenName:p.Z.PRODUCT,productUUID:null==i?void 0:i.id,skuUUID:l||null,productName:null==i?void 0:i.title})},z=async()=>{var e,t,n,l;b?(await W(),$({gaEvent:c.EVENTS.UnfollowProduct,segmentEvent:m.Z.PRODUCT_UNFOLLOWED,singleSizeVariant:null==i?void 0:null===(t=i.variants)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id})):(await M(),$({gaEvent:c.EVENTS.FollowProduct,segmentEvent:C,singleSizeVariant:null==i?void 0:null===(l=i.variants)||void 0===l?void 0:null===(n=l[0])||void 0===n?void 0:n.id}))};return{handleFavoriteUpdate:z,favoriteLoading:A,unfavoriteLoading:R,setRetry:y,modalErrorIsOpen:w,modalErrorOnClose:N,modalErrorOnOpen:D}}},56056:function(e,i,t){var n=t(4480),l=t(23959);i.Z=(e,i)=>{let t=(0,n.sJ)(l.Z);return(null==t?void 0:t[e])??i}},75150:function(e,i,t){var n=t(71285),l=t(26354);i.Z=()=>{let{mutatefn:e,data:i,error:t,loading:o}=(0,n.Z)(l.Z);return{data:i,error:t,loading:o,updateFavoriteProduct:e}}},26354:function(e,i){i.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateFavoriteProduct"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"UpdateListItemsInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateListItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favorite"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:220,source:{body:"\n  mutation UpdateFavoriteProduct($input: UpdateListItemsInput) {\n    updateListItems(input: $input) {\n      status\n      items {\n        status\n        item {\n          id\n          favorite\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}},23959:function(e,i,t){var n,l,o=t(89424),a=t(4480);let r="favoritedProducts";(n=l||(l={})).List="List",n.DataState="DataState";let d=(0,o.Z)(r,Object.values(l)),u=(0,a.cn)({key:d[r].DataState.atom,default:{}}),s=(0,a.nZ)({key:d[r].List.atom,get:e=>{let{get:i}=e;return i(u)},set:(e,i)=>{let{set:t}=e;t(u,e=>({...e,...i}))}});i.Z=s},70230:function(e,i,t){var n,l,o=t(67294),a=t(48182);(n=l||(l={})).jpg="jpg",n.webp="webp",n.avif="avif";let r=e=>{var i;return parseInt((null===(i=e.split("."))||void 0===i?void 0:i[0])??"0",10)},d=(e,i,t)=>"Safari"===e&&i>=16||"Chrome"===e&&i>90&&"iOS"!==t||"Firefox"===e&&i>93&&"iOS"!==t||"Opera"===e&&i>71&&"iOS"!==t,u=(e,i,t,n,o)=>"Firefox"===e&&i>65&&i<93||"Safari"===e&&i>=14&&"desktop"!==o?l.webp:"Chrome"===e&&i>33&&"iOS"!==t||("Chrome"===e&&"desktop"!==o&&"iOS"===t&&n>=14||"Safari"===e&&i>=15&&"desktop"===o||"Microsoft Edge"===e&&i>=18?l.webp:void 0);i.Z=()=>{let e=(0,a.o)();return(0,o.useMemo)(()=>{if(!e)return l.jpg;let i=e.browser.name,t=r(e.browser.version??""),n=e.os.name,o=r(e.os.version??""),a=e.platform.type;return i&&n&&a?d(i,t,n)?l.avif:u(i,t,n,o,a)?l.webp:l.jpg:l.webp},[e])}},48712:function(e,i){i.Z=e=>{let{toCheck:i,optionalKeys:t,requiredKeys:n}=e,l=0;for(let[e,o]of Object.entries(i))if(!(t&&t.includes(e))&&(n&&n.includes(e)&&l++,!o&&!(null==t?void 0:t.includes(e))))return!1;return!n||l===n.length}}}]);